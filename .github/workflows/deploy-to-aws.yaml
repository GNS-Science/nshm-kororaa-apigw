name: deploy-aws-lambda

on:
  push:
    branches:
      - deploy-test
      # - main

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:      

jobs:
  call-test-workflow:
    # https://docs.github.com/en/actions/using-workflows/reusing-workflows#calling-a-reusable-workflow
    uses: ./.github/workflows/ci-test.yaml

  call-deploy-workflow:
    uses: GNS-Science/nshm-github-actions/.github/workflows/deploy-to-aws.yml@feature/16-deploy-to-aws
    with:
      operating-system: 'ubuntu-latest'
      python-version: 'None'
      node-version: '22'
      environment: true
    secrets: inherit
